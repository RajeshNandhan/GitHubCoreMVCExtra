
A Manual Procedure to Create a DEPLOYMENT indirectly PODS /SERVICE and Ingress Service in a Kubernetes Cluster using kubectl CLI
=========================================================================================================


IMPORTANT PRE-REQUISITES - 1

CREATE and PUSH docker IMAGES to rajeshcontainerregistry.azurecr.io manually following the instruction in the below file

C:\Rajesh\Projects\GitHubRepos\GitHubCoreMVC\Notes\Containerisation\Docker-AzureContainerRegistry.txt




IMPORTANT PRE-REQUISITES - 2

CREATE a AzureKubernetesCluster in Azure poratal using Kubectl and SWITCH context

C:\Rajesh\Projects\GitHubRepos\GitHubCoreMVC\Notes\Containerisation\Create-KubernetesCluster-Azure-Kubectl.txt




IMPORTANT PRE-REQUISITES - 3

Install NGINX Ingress Controller using the following command or link, traifix can also be an option for it.
An ingress controller is a piece of software that provides reverse proxy, configurable traffic routing, and TLS termination for Kubernetes services



1.  Add Kubernetes Ingress repository 

helm repo add ingress-nginx https://kubernetes.github.io/ingress-nginx


2.  Install Ingress controller

helm install nginx-ingress ingress-nginx/ingress-nginx

helm uninstall nginx-ingress



Check if Ingress controller installed

helm list

Check if Ingress controller installed

kubectl get pods 




Configure "Hosts" for URL to IP mapping of Ingress COntroller Loadbalancer Ip with Service Name

c:\Windows\System32\Drivers\etc\hosts
52.154.44.228 www.mainapparivutharavuthalamserviceingress.com





=========================================================================================================
CREATE AND REMOVE DEPLOYMENT


1.
Create DEPLOYMENT that is indirectly PODS / Container / Services in a Kubernetes Cluster


CD C:\Rajesh\Projects\GitHubRepos\GitHubCoreMVC\Containerisation\kubernetes

kubectl apply -f .\kubernetes-azurecontainerregistry-azurekubernetesservice-ingress.yml





2.
Remove DEPLOYMENT that is indirectly PODS / Container / Services from a Kubernetes Cluster


CD C:\Rajesh\Projects\GitHubRepos\GitHubCoreMVC\Containerisation\kubernetes

kubectl delete -f .\kubernetes-azurecontainerregistry-azurekubernetesservice-ingress.yml






=========================================================================================================
Testing DEPLOYMENTS in Azure Kubernetes Cluster



1.

kubectl get deployments


2.

kubectl get pods -o wide

>>mainapparivutharavuthalam-deployment-85c47b67g5bfb [ready:0/1]

3.

kubectl logs mainapparivutharavuthalam-deployment-85c47b67q29ln
kubectl describe pod mainapparivutharavuthalam-deployment-85c47b67q29ln

4.

kubectl get services


5.

kubectl get ingress --watch

Check if ingress controller is installed

kubectl get pods -n ingress-nginx -l app.kubernetes.io/name=ingress-nginx --watch

kubectl get pods -n kube-system